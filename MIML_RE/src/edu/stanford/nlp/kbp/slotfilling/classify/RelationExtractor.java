package edu.stanford.nlp.kbp.slotfilling.classify;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.Set;
import java.util.logging.Level;
import java.util.logging.Logger;

import edu.stanford.nlp.kbp.slotfilling.common.KBPTuple;
import edu.stanford.nlp.stats.Counter;

public abstract class RelationExtractor implements Serializable {
  private static final long serialVersionUID = 2606577772115897869L;
  
  protected static final Logger logger = Logger.getLogger(RelationExtractor.class.getName());
    
  public RelationExtractor() {
    logger.setLevel(Level.INFO);
  }
  
  /** 
   * Generates all possible labels (and their scores) for a tuple <entity, slot>
   * The NIL label is NOT to be generated by this method. 
   */
  public Counter<String> classifyRelation(KBPTuple tuple) {
    List<Collection<String>> mentions = new ArrayList<Collection<String>>();
    for(int i = 0; i < tuple.size(); i ++) {
      mentions.add(tuple.datum(i).asFeatures());
    }
    return classifyMentions(mentions);
  }
  
  public abstract Counter<String> classifyMentions(List<Collection<String>> relation);
  
  // Override for your oracle experiments
  public Counter<String> classifyOracleMentions(
      List<Collection<String>> relation,
      Set<String> goldLabels) {
    return null;
  }
  
  public void setLoggerLevel(Level level) {
    logger.setLevel(level);
  }
}
